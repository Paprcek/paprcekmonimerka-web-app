{% extends "base.html" %}

{% block title %}Kvalita Vzduchu{% endblock %}

{% block content %}
    <!-- Stránka má tmavý styl a kompletní layout díky dědičnosti z base.html -->
    <h1>Monitor Kvality Vzduchu v Praze</h1>

    {% if data %}
        <!-- ZOBRAZENÍ DAT -->
        <!-- Celá karta se daty je obalena div-em pro centrování a styl (data-box) -->
        <div class="data-box {{ status_css }}">
            <h2>AQI Status: {{ status_cz }}</h2>
            <p><strong>AQI Index:</strong> {{ data.aqi }} / 5</p>
            <!-- Zde zobrazujeme realna data s diakritikou µg/m³ a zaokrouhlenim -->
            <p><strong>PM2.5 Koncentrace:</strong> {{ data.pm25 | round(2) }} µg/m³</p>
            <p>
                Projekt demonstruje integraci Flask backendu s externím API (OpenWeatherMap)
                a zpracování JSON dat. (Nyní zobrazuje REÁLNÁ data, pokud je nastaven API klíč.)
            </p>
        </div>
    {% elif error_message %}
        <!-- CHYBOVÉ HLÁŠENÍ -->
        <div class="data-box status-unknown">
            <h2>{{ error_title }}</h2>
            <p>{{ error_message }}</p>
            <!-- Konkretni navod, jak opravit nejcastejsi chybu (klíč) -->
            <p>Prosím, zkontrolujte, zda je ve Vašem `.env` souboru správně nastaven klíč `OPENWEATHERMAP_API_KEY`.</p>
        </div>
    {% endif %}

    <p style="text-align: center; margin-top: 30px;"><a href="{{ url_for('index') }}" style="color: #4CAF50;">Zpět na Přehled Projektů</a></p>
{% endblock %}
